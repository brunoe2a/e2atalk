import{d as p,T as S,e as i,a as o,j as V,b as l,w as f,o as n,n as g,i as m,u as r,t as _,y as B,f as $,g as h,D as j}from"./app-DdRYZDN8.js";import{_ as T}from"./ButtonPadrao-q1H6ExQ9.js";import{_ as F}from"./Modal-CkEhWGh7.js";import{_ as I}from"./InputError-CfKJduYL.js";import{_ as Z}from"./ButtonSave-DfZN9vgD.js";import E from"./AudioGravador-COf99Tpw.js";const L={class:"space-y-6"},z={class:"p-6"},G={class:"mb-5"},H={key:0,class:"text-gray-500"},O={key:1,class:"text-green-600"},J=["value"],K={class:"mt-6 flex justify-end"},Y={__name:"AudioForm",props:{sessao_id:{type:Number,required:!0},contato_id:{type:Number,required:!0}},emits:["closeAnexo"],setup(x,{emit:w}){const v=x,u=p(!1),t=p(!1),d=p(null),y=w,e=S({sessao_id:v.sessao_id,contato_id:v.contato_id,arquivo:null,audio:null}),A=a=>{e.audio=a},b=()=>{u.value=!0},k=a=>{t.value=!1,a.dataTransfer.files.length&&(e.arquivo=a.dataTransfer.files[0])},C=()=>{t.value=!0},q=()=>{t.value=!1},D=()=>{d.value&&d.value.click()},M=()=>{e.post(route("service.messages.sendAudio"),{preserveScroll:!0,onSuccess:()=>c(),onFinish:()=>e.reset()})},c=()=>{u.value=!1,y("closeAnexo"),e.reset()};return(a,s)=>(n(),i("section",L,[o("li",{onClick:b,class:"flex py-2 items-center transition duration-300 hover:text-sky-500 hover:cursor-pointer"},s[1]||(s[1]=[V('<svg class="w-6 h-6 text-emerald-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M13 6.037c0-1.724-1.978-2.665-3.28-1.562L5.638 7.933H4c-1.105 0-2 .91-2 2.034v4.066c0 1.123.895 2.034 2 2.034h1.638l4.082 3.458c1.302 1.104 3.28.162 3.28-1.562V6.037Z"></path><path fill-rule="evenodd" d="M14.786 7.658a.988.988 0 0 1 1.414-.014A6.135 6.135 0 0 1 18 12c0 1.662-.655 3.17-1.715 4.27a.989.989 0 0 1-1.414.014 1.029 1.029 0 0 1-.014-1.437A4.085 4.085 0 0 0 16 12a4.085 4.085 0 0 0-1.2-2.904 1.029 1.029 0 0 1-.014-1.438Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M17.657 4.811a.988.988 0 0 1 1.414 0A10.224 10.224 0 0 1 22 12c0 2.807-1.12 5.35-2.929 7.189a.988.988 0 0 1-1.414 0 1.029 1.029 0 0 1 0-1.438A8.173 8.173 0 0 0 20 12a8.173 8.173 0 0 0-2.343-5.751 1.029 1.029 0 0 1 0-1.438Z" clip-rule="evenodd"></path></svg><span class="ml-3">Audio</span>',2)])),l(F,{show:u.value,onClose:c},{default:f(()=>[o("div",z,[s[4]||(s[4]=o("h2",{class:"text-xl font-medium text-gray-900"}," Anexar ou Gravar Audio ",-1)),s[5]||(s[5]=o("hr",{class:"my-4"},null,-1)),o("div",G,[o("div",{class:g(["w-full h-20 border-4 cursor-pointer border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",{"border-blue-500 bg-blue-50":t.value,"border-gray-300":!t.value}]),onDragover:m(C,["prevent"]),onDragleave:m(q,["prevent"]),onDrop:m(k,["prevent"]),onClick:D},[r(e).arquivo?(n(),i("p",O,_(r(e).arquivo.name),1)):(n(),i("p",H,"Arraste e solte um arquivo aqui ou clique para selecionar"))],34),B(o("input",{ref_key:"fileInput",ref:d,onInput:s[0]||(s[0]=N=>r(e).arquivo=N.target.files[0]),id:"file_input",type:"file"},null,544),[[j,!1]]),r(e).progress?(n(),i("progress",{key:0,value:r(e).progress.percentage,class:"w-full bg-green-600 rounded-full h-2.5 my-3",max:"100"},_(r(e).progress.percentage)+"% ",9,J)):$("",!0),l(I,{class:"mt-2",message:r(e).errors.arquivo},null,8,["message"])]),l(E,{onAudioCaptured:A}),o("div",K,[l(T,{onClick:c,cor:"light"},{default:f(()=>s[2]||(s[2]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-5 mr-2"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),h(" Cancel ")])),_:1}),l(Z,{cor:"green",class:g(["ms-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:M},{default:f(()=>s[3]||(s[3]=[h("Enviar")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"])]))}};export{Y as default};
