import{d as p,T as N,e as l,a as s,b as a,w as g,o as n,n as _,i as f,u as r,t as h,y as x,f as B,C as S,g as w,D as T}from"./app-DdRYZDN8.js";import{_ as $}from"./ButtonPadrao-q1H6ExQ9.js";import{_ as j}from"./Modal-CkEhWGh7.js";import{_ as y}from"./InputError-CfKJduYL.js";import{_ as F}from"./ButtonSave-DfZN9vgD.js";const H={class:"space-y-6"},L={class:"p-6"},Z={class:"mb-5"},E={key:0,class:"text-gray-500"},z={key:1,class:"text-green-600"},O=["value"],U={class:"mb-4"},G={class:"mt-6 flex justify-end"},W={__name:"ImagemForm",props:{sessao_id:{type:Number,required:!0},contato_id:{type:Number,required:!0}},emits:["closeAnexo"],setup(b,{emit:k}){const v=b,i=p(!1),t=p(!1),u=p(null),C=k,e=N({sessao_id:v.sessao_id,contato_id:v.contato_id,caption:"",arquivo:null}),q=()=>{i.value=!0},D=c=>{t.value=!1,c.dataTransfer.files.length&&(e.arquivo=c.dataTransfer.files[0])},I=()=>{t.value=!0},M=()=>{t.value=!1},V=()=>{u.value&&u.value.click()},A=()=>{e.post(route("service.messages.sendImage"),{preserveScroll:!0,onSuccess:()=>d(),onFinish:()=>e.reset()})},d=()=>{i.value=!1,C("closeAnexo"),e.reset()};return(c,o)=>(n(),l("section",H,[s("li",{onClick:q,class:"flex py-2 items-center transition duration-300 hover:text-sky-500 hover:cursor-pointer"},o[2]||(o[2]=[s("svg",{class:"w-6 h-6 text-blue-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},[s("path",{"fill-rule":"evenodd",d:"M13 10a1 1 0 0 1 1-1h.01a1 1 0 1 1 0 2H14a1 1 0 0 1-1-1Z","clip-rule":"evenodd"}),s("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12c0 .556-.227 1.06-.593 1.422A.999.999 0 0 1 20.5 20H4a2.002 2.002 0 0 1-2-2V6Zm6.892 12 3.833-5.356-3.99-4.322a1 1 0 0 0-1.549.097L4 12.879V6h16v9.95l-3.257-3.619a1 1 0 0 0-1.557.088L11.2 18H8.892Z","clip-rule":"evenodd"})],-1),s("span",{class:"ml-3"},"Imagem",-1)])),a(j,{show:i.value,onClose:d},{default:g(()=>[s("div",L,[o[5]||(o[5]=s("h2",{class:"text-xl font-medium text-gray-900"}," Anexar Imagem ",-1)),o[6]||(o[6]=s("hr",{class:"my-4"},null,-1)),s("div",Z,[s("div",{class:_(["w-full h-48 border-4 cursor-pointer border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",{"border-blue-500 bg-blue-50":t.value,"border-gray-300":!t.value}]),onDragover:f(I,["prevent"]),onDragleave:f(M,["prevent"]),onDrop:f(D,["prevent"]),onClick:V},[r(e).arquivo?(n(),l("p",z,h(r(e).arquivo.name),1)):(n(),l("p",E,"Arraste e solte um arquivo aqui ou clique para selecionar"))],34),x(s("input",{ref_key:"fileInput",ref:u,onInput:o[0]||(o[0]=m=>r(e).arquivo=m.target.files[0]),id:"file_input",type:"file"},null,544),[[T,!1]]),r(e).progress?(n(),l("progress",{key:0,value:r(e).progress.percentage,class:"w-full bg-green-600 rounded-full h-2.5 my-3",max:"100"},h(r(e).progress.percentage)+"% ",9,O)):B("",!0),a(y,{class:"mt-2",message:r(e).errors.arquivo},null,8,["message"])]),s("div",U,[x(s("input",{placeholder:"Digite uma legenda...","onUpdate:modelValue":o[1]||(o[1]=m=>r(e).caption=m),class:"w-full h-12 px-4 py-3 border border-slate-300 rounded-lg bg-white text-slate-500 focus:border-sky-500 focus:ring-sky-500"},null,512),[[S,r(e).caption]]),a(y,{class:"mt-2",message:r(e).errors.caption},null,8,["message"])]),s("div",G,[a($,{onClick:d,cor:"light"},{default:g(()=>o[3]||(o[3]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-5 mr-2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),w(" Cancel ")])),_:1}),a(F,{cor:"green",class:_(["ms-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:A},{default:g(()=>o[4]||(o[4]=[w("Enviar")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"])]))}};export{W as default};
