import{d as m,T as B,e as l,a as s,b as a,w as f,o as n,n as _,i as g,u as r,t as h,y as x,f as S,C as T,g as w,D as F}from"./app-DdRYZDN8.js";import{_ as H}from"./ButtonPadrao-q1H6ExQ9.js";import{_ as Z}from"./Modal-CkEhWGh7.js";import{_ as y}from"./InputError-CfKJduYL.js";import{_ as $}from"./ButtonSave-DfZN9vgD.js";const j={class:"space-y-6"},I={class:"p-6"},E={class:"mb-5"},L={key:0,class:"text-gray-500"},z={key:1,class:"text-green-600"},O=["value"],U={class:"mb-4"},G={class:"mt-6 flex justify-end"},W={__name:"DocumentoForm",props:{sessao_id:{type:Number,required:!0},contato_id:{type:Number,required:!0}},emits:["closeAnexo"],setup(b,{emit:k}){const v=b,i=m(!1),t=m(!1),u=m(null),D=k,e=B({sessao_id:v.sessao_id,contato_id:v.contato_id,caption:"",arquivo:null}),C=()=>{i.value=!0},q=d=>{t.value=!1,d.dataTransfer.files.length&&(e.arquivo=d.dataTransfer.files[0])},M=()=>{t.value=!0},V=()=>{t.value=!1},A=()=>{u.value&&u.value.click()},N=()=>{e.post(route("service.messages.sendFile"),{preserveScroll:!0,onSuccess:()=>c(),onFinish:()=>e.reset()})},c=()=>{i.value=!1,D("closeAnexo"),e.reset()};return(d,o)=>(n(),l("section",j,[s("li",{onClick:C,class:"flex py-2 items-center transition duration-300 hover:text-sky-500 hover:cursor-pointer"},o[2]||(o[2]=[s("svg",{class:"w-6 h-6 text-violet-600","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},[s("path",{"fill-rule":"evenodd",d:"M9 2.221V7H4.221a2 2 0 0 1 .365-.5L8.5 2.586A2 2 0 0 1 9 2.22ZM11 2v5a2 2 0 0 1-2 2H4v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-7ZM8 16a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1Zm1-5a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2H9Z","clip-rule":"evenodd"})],-1),s("span",{class:"ml-3"},"Documento",-1)])),a(Z,{show:i.value,onClose:c},{default:f(()=>[s("div",I,[o[5]||(o[5]=s("h2",{class:"text-xl font-medium text-gray-900"}," Anexar Documento ",-1)),o[6]||(o[6]=s("hr",{class:"my-4"},null,-1)),s("div",E,[s("div",{class:_(["w-full h-48 border-4 cursor-pointer border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",{"border-blue-500 bg-blue-50":t.value,"border-gray-300":!t.value}]),onDragover:g(M,["prevent"]),onDragleave:g(V,["prevent"]),onDrop:g(q,["prevent"]),onClick:A},[r(e).arquivo?(n(),l("p",z,h(r(e).arquivo.name),1)):(n(),l("p",L,"Arraste e solte um arquivo aqui ou clique para selecionar"))],34),x(s("input",{ref_key:"fileInput",ref:u,onInput:o[0]||(o[0]=p=>r(e).arquivo=p.target.files[0]),id:"file_input",type:"file"},null,544),[[F,!1]]),r(e).progress?(n(),l("progress",{key:0,value:r(e).progress.percentage,class:"w-full bg-green-600 rounded-full h-2.5 my-3",max:"100"},h(r(e).progress.percentage)+"% ",9,O)):S("",!0),a(y,{class:"mt-2",message:r(e).errors.arquivo},null,8,["message"])]),s("div",U,[x(s("input",{placeholder:"Digite uma legenda...","onUpdate:modelValue":o[1]||(o[1]=p=>r(e).caption=p),class:"w-full h-12 px-4 py-3 border border-slate-300 rounded-lg bg-white text-slate-500 focus:border-sky-500 focus:ring-sky-500"},null,512),[[T,r(e).caption]]),a(y,{class:"mt-2",message:r(e).errors.caption},null,8,["message"])]),s("div",G,[a(H,{onClick:c,cor:"light"},{default:f(()=>o[3]||(o[3]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",class:"w-5 mr-2"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1),w(" Cancel ")])),_:1}),a($,{cor:"green",class:_(["ms-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:N},{default:f(()=>o[4]||(o[4]=[w("Enviar")])),_:1},8,["class","disabled"])])])]),_:1},8,["show"])]))}};export{W as default};
